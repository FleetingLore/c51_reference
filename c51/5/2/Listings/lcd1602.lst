C51 COMPILER V9.60.7.0   LCD1602                                                           11/17/2025 18:23:47 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN .\Objects\lcd1602.obj
COMPILER INVOKED BY: D:\C51\BIN\C51.EXE lcd1602.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\lcd1602.l
                    -st) OBJECT(.\Objects\lcd1602.obj)

line level    source

   1          #include <REGX52.H>
   2          
   3          #define uchar unsigned char
   4          #define uint  unsigned int
   5          
   6          /// 引脚
   7          sbit lcd_rs = P2^6;
   8          sbit lcd_rw = P2^5;
   9          sbit lcd_en = P2^7;
  10          
  11          #define lcd_data_port P0
  12          
  13          /// 延时参数
  14          const uint AWAIT = 1;
  15          
  16          /**
  17           * [毫秒级延时函数]
  18           * 
  19           * 只是用循环来简单模拟，缺陷是对于不同的设备表现不一致。
  20           */
  21          void lcd_delay(uint t) {
  22   1          uchar j;
  23   1          while(t--) {
  24   2              j = 85;
  25   2              while (j--);
  26   2          }
  27   1      }
  28          
  29          /**
  30           * [LCD1602写命令]
  31           */
  32          void lcd_write_command(
  33              uchar command /* 要写入的命令 */
  34          ) {
  35   1          lcd_rs = 0;
  36   1          lcd_rw = 0;
  37   1          lcd_data_port = command;
  38   1          lcd_en = 1;
  39   1          lcd_delay(AWAIT);
  40   1          lcd_en = 0;
  41   1          lcd_delay(AWAIT);
  42   1      }
  43          
  44          /**
  45           * [LCD1602写数据]
  46           */
  47          void lcd_write_data(
  48              uchar input_data /* 要写入的数据 */
  49          ) {
  50   1          lcd_rs = 1;
  51   1          lcd_rw = 0;
  52   1          lcd_data_port = input_data;
  53   1          lcd_en = 1;
  54   1          lcd_delay(AWAIT);
C51 COMPILER V9.60.7.0   LCD1602                                                           11/17/2025 18:23:47 PAGE 2   

  55   1          lcd_en = 0;
  56   1          lcd_delay(AWAIT);
  57   1      }
  58          
  59          /**
  60           * [LCD1602设置光标位置]
  61           * 
  62           * [`line`] = 1..2
  63           * [`column`] = 1..16
  64           */
  65          void lcd_set_cursor(
  66              uchar line, /* 行位置 */
  67              uchar column /* 列位置 */
  68          ) {
  69   1          if(line == 1) {
  70   2              lcd_write_command(0x80 | (column - 1));
  71   2          }
  72   1          else if(line == 2) {
  73   2              lcd_write_command(0x80 | (column - 1 + 0x40));
  74   2          }
  75   1      }
  76          
  77          /**
  78           * [LCD1602初始化函数]
  79           */
  80          void lcd_init() {
  81   1          lcd_write_command(0x38);
  82   1          lcd_write_command(0x0c);
  83   1          lcd_write_command(0x06);
  84   1          lcd_write_command(0x01);
  85   1      }
  86          
  87          /**
  88           * [在LCD1602指定位置上显示一个字符]
  89           * 
  90           * [`line`] = 1..2
  91           * [`column`] = 1..16
  92           */
  93          void lcd_show_char(
  94              uchar line, /* 行位置 */
  95              uchar column, /* 列位置 */
  96              char input_char /* 要显示的字符 */
  97          ) {
  98   1          lcd_set_cursor(line, column);
  99   1          lcd_write_data(input_char);
 100   1      }
 101          
 102          /**
 103           * [在LCD1602指定位置开始显示所给字符串]
 104           * 
 105           * [`line`] = 1..2
 106           * [`column`] = 1..16
 107           */
 108          void lcd_show_string(
 109              uchar line, /* 起始行位置 */
 110              uchar column, /* 起始列位置 */
 111              char *input_string /* 要显示的字符串 */
 112          ) {
 113   1          uchar i;
 114   1          lcd_set_cursor(line, column);
 115   1          for(i = 0; input_string[i] != '\0'; i++) {
 116   2              lcd_write_data(input_string[i]);
C51 COMPILER V9.60.7.0   LCD1602                                                           11/17/2025 18:23:47 PAGE 3   

 117   2          }
 118   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    147    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
